(this["webpackJsonpcommunity-home-react"]=this["webpackJsonpcommunity-home-react"]||[]).push([[0],{15:function(e,t,n){e.exports=n(33)},20:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(3),i=n.n(r),l=(n(20),n(10)),s=n(11),c=n(13),u=n(12),m=n(1),d=n(14),h=n(4),p=n.n(h);n(32);function f(e){var t=new Map,n=!0,a=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var l=r.value;t.has(l.communityId)?t.get(l.communityId).push(l):t.set(l.communityId,[l])}}catch(s){a=!0,o=s}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return t}p.a.setAppElement("#root");var y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).currentCommunity={},n.currentHouses=[],n.state={error:null,isLoaded:!1,communities:[],houses:new Map,modalOpen:!1,currentCommunity:{},currentHouses:[]},n.handleOpenModal=n.handleOpenModal.bind(Object(m.a)(n)),n.handleCloseModal=n.handleCloseModal.bind(Object(m.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleOpenModal",value:function(){this.setState({modalOpen:!0})}},{key:"handleCloseModal",value:function(){this.setState({modalOpen:!1})}},{key:"updateModal",value:function(e,t){this.currentCommunity=e,this.currentHouses=t,this.handleOpenModal()}},{key:"componentDidMount",value:function(){var e=this;fetch("https://a18fda49-215e-47d1-9dc6-c6136a04a33a.mock.pstmn.io/communities").then((function(e){return e.json()})).then((function(t){e.setState({communities:t}),fetch("https://a18fda49-215e-47d1-9dc6-c6136a04a33a.mock.pstmn.io/homes").then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,houses:f(t)})}),(function(t){e.setState({isLoaded:!0,error:t})}))}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"createCommunity",value:function(e,t){var n=function(e){if(void 0===e)return{houseFound:!1,lowest:0,highest:0};for(var t,n,a=0;a<e.length;a++)0===a?(t=e[0].price,n=e[0].price):t>e[a].price?t=e[a].price:n<e[a].price&&(n=e[a].price);return{houseFound:!0,lowest:t,highest:n}}(t);return o.a.createElement("div",{key:e.id,className:"community",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.5)), url("+e.imgUrl+")"},onClick:this.updateModal.bind(this,e,t)},o.a.createElement("div",{className:"description"},o.a.createElement("h2",null,e.name),!0===n.houseFound?n.lowest===n.highest?o.a.createElement("p",null,"$",n.lowest):o.a.createElement("p",null,"$",n.lowest," - $",n.highest):o.a.createElement("p",null,"Prices Not Available")))}},{key:"render",value:function(){var e=this,t=this.state,n=t.error,a=t.isLoaded,r=t.communities,i=t.houses;return r.sort((function(e,t){return e.name>t.name?1:-1})),n?o.a.createElement("div",{className:"Communities"},"Error: ",n.message):a?o.a.createElement("div",{className:"Communities"},o.a.createElement("h1",null,"Communities"),o.a.createElement("div",{id:"communities"},r.map((function(t){return e.createCommunity(t,i.get(t.id))}))),o.a.createElement(p.a,{isOpen:this.state.modalOpen,contentLabel:"onRequestClose houseList",onRequestClose:this.handleCloseModal,className:"CommunitySpecifics",overlayClassName:"Background"},o.a.createElement("button",{className:"closeButton",onClick:this.handleCloseModal},"X"),o.a.createElement("h1",null,this.currentCommunity.name),function(e){return e?o.a.createElement("table",{className:"HouseList"},o.a.createElement("thead",null,o.a.createElement("tr",{key:"header"},o.a.createElement("th",null,"Type"),o.a.createElement("th",null,"Area"),o.a.createElement("th",null,"Price"))),o.a.createElement("tbody",null,e.map((function(e){return o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,e.type),o.a.createElement("td",null,e.area),o.a.createElement("td",null,"$",e.price))})))):o.a.createElement("div",null,"No houses available")}(this.currentHouses))):o.a.createElement("div",{id:"loading",className:"Communities"},"Loading...")}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.cd102e32.chunk.js.map